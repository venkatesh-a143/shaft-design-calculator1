<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shaft Design Calculator - HLD & VLD</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>&#128295; Shaft Design Calculator</h1>
            <p>Calculate shaft dimensions with HLD and VLD diagrams</p>
        </header>

        <div class="calculator">

            <div class="section">
                <h2>1. Select Problem Type</h2>
                <label><input type="radio" name="problemType" value="normal" checked onchange="toggleProblemType()"> <strong>Normal Shaft</strong> &#8212; Single gear between two bearings</label>
                <label><input type="radio" name="problemType" value="udl" onchange="toggleProblemType()"> <strong>UDL Shaft</strong> &#8212; Uniformly Distributed Load on shaft</label>
                <label><input type="radio" name="problemType" value="singlepulley" onchange="toggleProblemType()"> <strong>Single Pulley Shaft</strong> &#8212; One pulley with belt tensions</label>
                <label><input type="radio" name="problemType" value="twogear" onchange="toggleProblemType()"> <strong>Two Gears Shaft</strong> &#8212; Two gears at different positions</label>
                <label><input type="radio" name="problemType" value="pulleygear" onchange="toggleProblemType()"> <strong>Pulley + Gear Shaft</strong> &#8212; One pulley and one gear on shaft</label>
                <label><input type="radio" name="problemType" value="multipulley" onchange="toggleProblemType()"> <strong>Multi Pulley Shaft</strong> &#8212; Two pulleys on shaft (same direction)</label>
                <label><input type="radio" name="problemType" value="twopulleyvh" onchange="toggleProblemType()"> <strong>Two Pulleys (V+H)</strong> &#8212; One vertical drive + one horizontal drive pulley</label>
            </div>

            <div class="section">
                <h2>2. Power & Speed</h2>
                <div class="input-group"><label>Power (kW):</label><input type="number" id="power" value="15" step="0.1"></div>
                <div class="input-group"><label>Speed (rpm):</label><input type="number" id="speed" value="1500" step="1"></div>
            </div>

            <div class="section config-section" id="normalSection">
                <h2>3. Shaft Configuration &#8212; Normal Shaft</h2>
                <div class="input-group"><label>Distance between bearings (mm):</label><input type="number" id="normal_bearingDist" value="400" step="1"></div>
                <div class="input-group"><label>Distance of gear from left bearing (mm):</label><input type="number" id="normal_gearPos" value="200" step="1"></div>
                <div class="input-group"><label>Gear pitch diameter (mm):</label><input type="number" id="normal_gearDia" value="200" step="1"></div>
                <div class="input-group"><label>Pressure angle (degrees):</label><input type="number" id="normal_pressureAngle" value="20" step="1"></div>
                <div class="input-group"><label>Weight of gear (N) [0 if not given]:</label><input type="number" id="normal_gearWeight" value="0" step="1"></div>
            </div>

            <div class="section config-section" id="udlSection" style="display:none;">
                <h2>3. Shaft Configuration &#8212; UDL Shaft</h2>
                <div class="input-group"><label>Total shaft length (mm):</label><input type="number" id="totalLength" value="800" step="1"></div>
                <div class="input-group"><label>UDL length (mm):</label><input type="number" id="udlLength" value="500" step="1"></div>
                <div class="input-group"><label>UDL intensity (N/mm):</label><input type="number" id="udlIntensity" value="15" step="0.1"></div>
            </div>

            <div class="section config-section" id="singlePulleySection" style="display:none;">
                <h2>3. Shaft Configuration &#8212; Single Pulley</h2>
                <div class="input-group"><label>Distance between bearings (mm):</label><input type="number" id="sp_bearingDist" value="400" step="1"></div>
                <div class="input-group"><label>Distance of pulley from left bearing (mm):</label><input type="number" id="sp_pulleyPos" value="200" step="1"></div>
                <div class="input-group"><label>Pulley diameter (mm):</label><input type="number" id="sp_pulleyDia" value="1500" step="1"></div>
                <div class="input-group"><label>Weight of pulley (N) [0 if not given]:</label><input type="number" id="sp_pulleyWeight" value="0" step="1"></div>
                <h3 style="color:#667eea;margin:15px 0 10px;">Belt Tensions</h3>
                <label><input type="radio" name="tensionInput" value="direct" checked onchange="toggleTensionInput()"> Enter T&#8321; and T&#8322; directly</label>
                <label><input type="radio" name="tensionInput" value="ratio" onchange="toggleTensionInput()"> Enter tension ratio T&#8321;/T&#8322;</label>
                <div id="directTensionInputs">
                    <div class="input-group"><label>Tight side tension T&#8321; (N):</label><input type="number" id="sp_T1" value="5400" step="1"></div>
                    <div class="input-group"><label>Slack side tension T&#8322; (N):</label><input type="number" id="sp_T2" value="1800" step="1"></div>
                </div>
                <div id="ratioTensionInputs" style="display:none;">
                    <div class="input-group"><label>Tension ratio T&#8321;/T&#8322;:</label><input type="number" id="sp_tensionRatio" value="2" step="0.1"></div>
                </div>
            </div>

            <div class="section config-section" id="twoGearSection" style="display:none;">
                <h2>3. Shaft Configuration &#8212; Two Gears</h2>
                <div class="input-group"><label>Distance between bearings A and B (mm):</label><input type="number" id="bearingDistance" value="750" step="1"></div>
                <h3 style="color:#667eea;margin:15px 0 10px;">Gear C (Left Gear)</h3>
                <div class="input-group"><label>Distance of Gear C from Bearing A (mm):</label><input type="number" id="gearC_pos" value="150" step="1"></div>
                <div class="input-group"><label>Pitch diameter of Gear C (mm):</label><input type="number" id="gearC_dia" value="480" step="1"></div>
                <div class="input-group"><label>Weight of Gear C (N) [0 if not given]:</label><input type="number" id="gearC_weight" value="0" step="1"></div>
                <h3 style="color:#667eea;margin:15px 0 10px;">Gear D (Right Gear)</h3>
                <div class="input-group"><label>Distance of Gear D from Bearing A (mm):</label><input type="number" id="gearD_pos" value="650" step="1"></div>
                <div class="input-group"><label>Pitch diameter of Gear D (mm):</label><input type="number" id="gearD_dia" value="144" step="1"></div>
                <div class="input-group"><label>Weight of Gear D (N) [0 if not given]:</label><input type="number" id="gearD_weight" value="0" step="1"></div>
                <div class="input-group"><label>Pressure angle (degrees):</label><input type="number" id="twoGear_pressureAngle" value="20" step="1"></div>
            </div>

            <div class="section config-section" id="pulleyGearSection" style="display:none;">
                <h2>3. Shaft Configuration &#8212; Pulley + Gear</h2>
                <div class="input-group"><label>Distance between bearings (mm):</label><input type="number" id="pg_bearingDistance" value="500" step="1"></div>
                <h3 style="color:#667eea;margin:15px 0 10px;">Pulley</h3>
                <div class="input-group"><label>Distance of pulley from left bearing (mm):</label><input type="number" id="pulley_pos" value="200" step="1"></div>
                <div class="input-group"><label>Pulley diameter (mm):</label><input type="number" id="pulley_dia" value="1200" step="1"></div>
                <div class="input-group"><label>Weight of pulley (N) [0 if not given]:</label><input type="number" id="pulley_weight" value="2400" step="1"></div>
                <div class="input-group"><label>Tension ratio T&#8321;/T&#8322;:</label><input type="number" id="tensionRatio" value="2" step="0.1"></div>
                <h3 style="color:#667eea;margin:15px 0 10px;">Gear</h3>
                <div class="input-group"><label>Distance of gear from left bearing (mm):</label><input type="number" id="gear_pos" value="500" step="1"></div>
                <div class="input-group"><label>Gear diameter (mm):</label><input type="number" id="gear_dia" value="700" step="1"></div>
                <div class="input-group"><label>Weight of gear (N) [0 if not given]:</label><input type="number" id="gear_weight" value="800" step="1"></div>
                <div class="input-group"><label>Pressure angle (degrees):</label><input type="number" id="pg_pressureAngle" value="20" step="1"></div>
            </div>

            <div class="section config-section" id="multiPulleySection" style="display:none;">
                <h2>3. Shaft Configuration &#8212; Multi Pulley</h2>
                <div class="input-group"><label>Distance between bearings (mm):</label><input type="number" id="mp_bearingDist" value="850" step="1"></div>
                <h3 style="color:#667eea;margin:15px 0 10px;">Pulley A (Left)</h3>
                <div class="input-group"><label>Distance from left bearing (mm):</label><input type="number" id="mp_pulleyA_pos" value="200" step="1"></div>
                <div class="input-group"><label>Pulley A diameter (mm):</label><input type="number" id="mp_pulleyA_dia" value="600" step="1"></div>
                <div class="input-group"><label>Weight of Pulley A (N) [0 if not given]:</label><input type="number" id="mp_pulleyA_weight" value="1500" step="1"></div>
                <div class="input-group"><label>T&#8321; tight side tension (N):</label><input type="number" id="mp_T1A" value="6000" step="1"></div>
                <div class="input-group"><label>T&#8322; slack side tension (N):</label><input type="number" id="mp_T2A" value="2000" step="1"></div>
                <h3 style="color:#667eea;margin:15px 0 10px;">Pulley B (Right)</h3>
                <div class="input-group"><label>Distance from left bearing (mm):</label><input type="number" id="mp_pulleyB_pos" value="600" step="1"></div>
                <div class="input-group"><label>Pulley B diameter (mm):</label><input type="number" id="mp_pulleyB_dia" value="400" step="1"></div>
                <div class="input-group"><label>Weight of Pulley B (N) [0 if not given]:</label><input type="number" id="mp_pulleyB_weight" value="800" step="1"></div>
                <div class="input-group"><label>T&#8321; tight side tension (N):</label><input type="number" id="mp_T1B" value="4000" step="1"></div>
                <div class="input-group"><label>T&#8322; slack side tension (N):</label><input type="number" id="mp_T2B" value="1500" step="1"></div>
            </div>

            <div class="section config-section" id="twoPulleyVHSection" style="display:none;">
                <h2>3. Shaft Configuration &#8212; Two Pulleys (V+H)</h2>
                <p style="color:#888;font-size:0.9em;margin-bottom:15px;">One pulley belt drive is vertical, the other is horizontal. Pulleys can be between bearings or overhang outside.</p>
                <div class="input-group"><label>Distance between bearings A and B (mm):</label><input type="number" id="vh_bearingDist" value="600" step="1"></div>

                <h3 style="color:#667eea;margin:15px 0 10px;">Left Pulley C (Vertical Belt Drive &#8595;)</h3>
                <div class="input-group"><label>Distance from left bearing A (mm):</label><input type="number" id="vh_pulleyC_pos" value="250" step="1"></div>
                <div class="input-group"><label>Pulley C diameter (mm):</label><input type="number" id="vh_pulleyC_dia" value="500" step="1"></div>

                <h4 style="color:#555;margin:10px 0 5px;">Tension Input for Pulley C</h4>
                <label><input type="radio" name="vhC_tensionMethod" value="direct" checked onchange="toggleVHC()"> Enter T&#8321; and T&#8322; directly</label>
                <label><input type="radio" name="vhC_tensionMethod" value="friction" onchange="toggleVHC()"> Use &#956; and &#952; (friction method)</label>
                <div id="vhC_directInputs">
                    <div class="input-group"><label>T&#8321; tight side (N):</label><input type="number" id="vh_T1C" value="3000" step="1"></div>
                    <div class="input-group"><label>T&#8322; slack side (N):</label><input type="number" id="vh_T2C" value="1000" step="1"></div>
                </div>
                <div id="vhC_frictionInputs" style="display:none;">
                    <div class="input-group"><label>Maximum tension T&#8321; (N):</label><input type="number" id="vh_T1C_f" value="5500" step="1"></div>
                    <div class="input-group"><label>Coefficient of friction &#956;:</label><input type="number" id="vh_muC" value="0.3" step="0.01"></div>
                    <div class="input-group"><label>Angle of contact &#952; (degrees):</label><input type="number" id="vh_thetaC" value="180" step="1"></div>
                </div>

                <h3 style="color:#667eea;margin:15px 0 10px;">Right Pulley D (Horizontal Belt Drive &#8594;)</h3>
                <div class="input-group"><label>Distance from left bearing A (mm):</label><input type="number" id="vh_pulleyD_pos" value="730" step="1"></div>
                <div class="input-group"><label>Pulley D diameter (mm):</label><input type="number" id="vh_pulleyD_dia" value="380" step="1"></div>

                <h4 style="color:#555;margin:10px 0 5px;">Tension Input for Pulley D</h4>
                <label><input type="radio" name="vhD_tensionMethod" value="direct" checked onchange="toggleVHD()"> Enter T&#8323; and T&#8324; directly</label>
                <label><input type="radio" name="vhD_tensionMethod" value="friction" onchange="toggleVHD()"> Use &#956; and &#952; (friction method)</label>
                <div id="vhD_directInputs">
                    <div class="input-group"><label>T&#8323; tight side (N):</label><input type="number" id="vh_T3D" value="5500" step="1"></div>
                    <div class="input-group"><label>T&#8324; slack side (N):</label><input type="number" id="vh_T4D" value="2143.41" step="0.01"></div>
                </div>
                <div id="vhD_frictionInputs" style="display:none;">
                    <div class="input-group"><label>Maximum tension T&#8323; (N):</label><input type="number" id="vh_T3D_f" value="5500" step="1"></div>
                    <div class="input-group"><label>Coefficient of friction &#956;:</label><input type="number" id="vh_muD" value="0.3" step="0.01"></div>
                    <div class="input-group"><label>Angle of contact &#952; (degrees):</label><input type="number" id="vh_thetaD" value="180" step="1"></div>
                </div>

                <h3 style="color:#667eea;margin:15px 0 10px;">Torque Input</h3>
                <label><input type="radio" name="vhTorqueMethod" value="auto" checked> Calculate torque from power &amp; speed (Section 2)</label>
                <label><input type="radio" name="vhTorqueMethod" value="pulley"> Calculate torque from one pulley: T = (T<sub>tight</sub> &#8722; T<sub>slack</sub>) &#215; R</label>
            </div>

            <div class="section">
                <h2>4. Material Properties</h2>
                <label><input type="radio" name="stressMethod" value="direct" checked onchange="toggleStressMethod()"> <strong>Direct Allowable Shear Stress</strong></label>
                <label><input type="radio" name="stressMethod" value="material" onchange="toggleStressMethod()"> <strong>Material Properties</strong> (&#963;<sub>ut</sub>, &#963;<sub>yt</sub>, n')</label>
                <label><input type="radio" name="stressMethod" value="working" onchange="toggleStressMethod()"> <strong>Working Stresses</strong> (&#963; and &#964; given directly)</label>
                <label><input type="radio" name="stressMethod" value="yield" onchange="toggleStressMethod()"> <strong>Yield Strength Design</strong> (&#963;<sub>yt</sub> / FoS)</label>
                <div id="directStressInputs">
                    <div class="input-group"><label>Allowable Shear Stress &#964; (MPa):</label><input type="number" id="tauAllow" value="50" step="0.1"></div>
                </div>
                <div id="materialInputs" style="display:none;">
                    <div class="input-group"><label>Ultimate Tensile Strength &#963;<sub>ut</sub> (MPa):</label><input type="number" id="sigmaUt" value="630" step="1"></div>
                    <div class="input-group"><label>Yield Tensile Strength &#963;<sub>yt</sub> (MPa):</label><input type="number" id="sigmaYt" value="324" step="1"></div>
                    <div class="input-group"><label>Factor of Safety n':</label><input type="number" id="nPrime" value="1.5" step="0.1"></div>
                </div>
                <div id="workingStressInputs" style="display:none;">
                    <div class="input-group"><label>Working Stress in Tension &#963;<sub>max</sub> (MPa):</label><input type="number" id="sigmaWorking" value="100" step="1"></div>
                    <div class="input-group"><label>Working Stress in Shear &#964;<sub>max</sub> (MPa):</label><input type="number" id="tauWorking" value="56" step="1"></div>
                </div>
                <div id="yieldStressInputs" style="display:none;">
                    <div class="input-group"><label>Yield Tensile Strength &#963;<sub>yt</sub> (MPa):</label><input type="number" id="sigmaYtYield" value="234" step="1"></div>
                    <div class="input-group"><label>Factor of Safety:</label><input type="number" id="fosYield" value="3" step="0.1"></div>
                </div>
                <div class="input-group" style="margin-top:15px;">
                    <label style="display:flex;align-items:center;gap:8px;">
                        <input type="checkbox" id="hasKeyway" style="width:20px;height:20px;">
                        <strong>Has Keyway</strong> (reduce stress by 25%)
                    </label>
                </div>
            </div>

            <div class="section">
                <h2>5. Combined Shock & Fatigue Factors</h2>
                <div class="input-group"><label>C<sub>m</sub> (bending shock factor):</label><input type="number" id="cm" value="1.5" step="0.1"></div>
                <div class="input-group"><label>C<sub>t</sub> (torsion shock factor):</label><input type="number" id="ct" value="1" step="0.1"></div>
                <p style="color:#888;font-size:0.9em;">Default: C<sub>m</sub> = 1.5, C<sub>t</sub> = 1. Change values as per your problem.</p>
            </div>

            <div class="section">
                <h2>6. Shaft Type</h2>
                <label><input type="radio" name="shaftType" value="solid" checked onchange="toggleShaftType()"> <strong>Solid Shaft</strong></label>
                <label><input type="radio" name="shaftType" value="hollow" onchange="toggleShaftType()"> <strong>Hollow Shaft</strong></label>
                <div id="hollowInputs" style="display:none;">
                    <div class="input-group"><label>Diameter Ratio d<sub>i</sub>/d<sub>o</sub> (e.g. 1/2 or 3/8):</label><input type="text" id="diameterRatio" value="1/2" placeholder="e.g. 1/2 or 0.6"></div>
                </div>
            </div>

            <div class="section">
                <h2>7. Angular Deflection (Optional)</h2>
                <div class="input-group"><label style="display:flex;align-items:center;gap:8px;"><input type="checkbox" id="calcDeflection" style="width:20px;height:20px;"> <strong>Calculate angular deflection &#952;?</strong></label></div>
                <div id="deflectionInputs" style="display:none;">
                    <div class="input-group"><label>Modulus of Rigidity G (GPa):</label><input type="number" id="deflG" value="80" step="1"></div>
                    <div class="input-group"><label>Length between bearings (mm):</label><input type="number" id="deflL" value="500" step="1"></div>
                </div>
            </div>

            <button class="calculate-btn" onclick="calculateShaft()">&#128295; Calculate & Generate Diagrams</button>
        </div>

        <div id="results" class="results" style="display:none;">
            <h2>&#128202; Results</h2>
            <div class="result-cards">
                <div class="result-card"><h3>Torque (T)</h3><p id="torqueResult">-</p></div>
                <div class="result-card"><h3>Max Bending Moment (M)</h3><p id="momentResult">-</p></div>
                <div class="result-card"><h3>Shaft Diameter</h3><p id="diameterResult">-</p></div>
            </div>
            <div class="detailed-results" id="detailedResults"></div>
        </div>

        <div id="diagrams" style="display:none;"></div>

        <footer>
            <p>Created by Venkatesh A143 | <a href="https://github.com/venkatesh-a143/shaft-design-calculator1" target="_blank">View on GitHub</a></p>
        </footer>
    </div>
    <script src="script.js"></script>
</body>
</html>
